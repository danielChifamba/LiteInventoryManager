{% extends "components/main/base.html" %}
{% load static %}
{% block customCSS %}
<link rel=stylesheet href="{% static 'styles/table.css' %}">{% endblock customCSS %}
{% block title %}<title>{{ business.business_name }} - Product Categories</title>{% endblock title %}
{% block content %}<main><h1 class=title>Products Category</h1><hr>{% include 'components/main/alert.html' %}<div class=container-fluid><div class="container action d-flex gap-2 justify-content-end"><button class="btn btn-primary mb-3" data-bs-toggle=modal data-bs-target=#addCategoryModal>Add Product Category</button></div><div class="container-fluid rounded-4 p-2"><div class="container d-flex align-items-center justify-content-end my-2"><form class="d-flex position-relative" role=search><input class="form-control me-2" type=search placeholder=Search aria-label=Search></form></div><table class="table table-striped table-hover text-center border">{% if categories %}<thead class=thead-primary><tr><th>ID<th>Name<th>Description<th>Number of Products<th>Total stock value<th>Action<tbody id=categoriesView>{% for category in categories %}<tr><td>{{ category.cid }}<td>{{ category.name }}<td class="desc position-relative">{{ category.description|truncatechars:20 }}<ul class="pop description"><p class=lead>{{ category.description }}</ul><td>{{ category.get_total_products }}<td>{{ business.currency_symbol }}{{ category.get_total_stock_value|floatformat:2 }}<td class=d-flex><form hx-post="{% url 'dashboard:get_product_category' category.cid %}" hx-target=#productCategoryUpdateContainer>{% csrf_token %}
<button class="btn btn-sm edit action" data-bs-toggle=modal data-bs-target=#updateCategoryModal><i class="bi bi-pencil color-warning"></i></button></form><form hx-post="{% url 'dashboard:get_product_category_delete' category.cid %}" hx-target=#productCategoryDeleteContainer>{% csrf_token %}
<button class="btn btn-sm delete action" data-bs-toggle=modal data-bs-target=#warningModal><i class="bi bi-trash color-danger"></i></button></form>{% endfor %}
{% else %}<div class="d-flex align-items-center justify-content-center p-2 rounded-3 bg-grey"><div class=lead>No categories available</div></div>{% endif %}</table></div></div></main>{% include 'components/dashboard/categoryModal.html' %}
{% endblock content %}
{% block customJS %}
<script>$(document).ready(function(){document.querySelector("input").value=""})</script>{% endblock customJS %}