{% extends "components/main/base.html" %}
{% load static %}
{% block customCSS %}
<link rel=stylesheet href="{% static 'styles/table.css' %}">{% endblock customCSS %}
{% block title %}<title>{{ business.business_name }} - Dashboard</title>{% endblock title %}
{% block content %}<main><h1 class=title>Dashboard</h1><hr>{% include 'components/main/alert.html' %}<div class="container-fluid rounded-4 d-flex row topbar"><div class=stats-grid><div class="stat-card revenue bg-white"><div class=stat-header><div class="stat-icon revenue"><i class="bi bi-currency-dollar"></i></div></div><div class=stat-label>Today's Revenue</div><div class=stat-value id=today_sales>{{ business.currency_symbol }}{{ today_sales|floatformat:2 }}</div>{% comment %}<div class="stat-change positive"><i class="fas fa-arrow-up"></i>
12.5% vs yesterday</div>{% endcomment %}</div><div class="stat-card sales bg-white"><div class=stat-header><div class="stat-icon sales"><i class="bi bi-cart"></i></div></div><div class=stat-label>Today's Sales</div><div class=stat-value id=today_transactions>{{ today_transactions }}</div>{% comment %}<div class="stat-change positive"><i class="fas fa-arrow-up"></i>
8.2% vs yesterday</div>{% endcomment %}</div><div class="stat-card products bg-white"><div class=stat-header><div class="stat-icon products"><i class="bi bi-box-seam"></i></div></div><div class=stat-label>Total Products</div><div class=stat-value id=total_products>{{ total_products }}</div><div class="stat-change positive" id=total_categories>{{ total_categories }} {% if total_categories >= 1 %} category {% else %} categories{% endif %}</div></div><div class="stat-card expenses bg-white"><div class=stat-header><div class="stat-icon expenses"><i class="bi bi-wallet"></i></div></div><div class=stat-label>Today Expenses</div><div class=stat-value>{{ business.currency_symbol }}{{ today_expenses|floatformat:2 }}</div>{% comment %}<div class="stat-change positive" id=total_categories>{{ total_categories }} {% if total_categories >= 1 %} category {% else %} categories{% endif %}</div>{% endcomment %}</div><div class="stat-card net-profit bg-white"><div class=stat-header><div class="stat-icon net-profit"><i class="bi bi-graph-up"></i></div></div><div class=stat-label>Today Net Profit</div><div class=stat-value>{{ business.currency_symbol }}{{ today_net_profit|floatformat:2 }}</div>{% comment %}<div class="stat-change positive" id=total_categories>{{ total_categories }} {% if total_categories >= 1 %} category {% else %} categories{% endif %}</div>{% endcomment %}</div><div class="stat-card profit-margin bg-white"><div class=stat-header><div class="stat-icon profit-margin"><i class="bi bi-percent"></i></div></div><div class=stat-label>Profit Margin</div><div class=stat-value>{{ profit_margin|floatformat:2 }}%</div>{% comment %}<div class="stat-change positive" id=total_categories>{{ total_categories }} {% if total_categories >= 1 %} category {% else %} categories{% endif %}</div>{% endcomment %}</div></div></div><div class="container-fluid rounded-4 p-2 mb-4"><p class="lead fw-bold fs-4 color-warning text-decoration-underline">Top Products<table class="table table-striped border">{% if top_products %}<thead class=thead-primary><tr><th>SKU<th>Name<th>Category<th>Cost Price<th>Selling Price<th>Bought<tbody>{% for product in top_products %}<tr><td>{{ product.sku }}<td>{{ product.name }}<td>{{ product.category }}<td>{{ business.currency_symbol }}{{ product.cost_price|floatformat:2 }}<td>{{ business.currency_symbol }}{{ product.selling_price|floatformat:2 }}<td>{{ product.total_sold }}
{% endfor %}
{% else %}<div class="d-flex align-items-center justify-content-center p-2 rounded-3 bg-grey"><div class=lead>No sales data available</div></div>{% endif %}</table></div><div class="container-fluid rounded-4 p-2 mb-4"><p class="lead fw-bold fs-4 color-blue text-decoration-underline">Recent Sales<table class="table table-striped border">{% if recent_sales %}<thead class=thead-primary><tr><th>Sale ID<th>Date<th>Cashier<th>Payment Method<th>Sub Total<th>Total Amount<tbody>{% for sale in recent_sales %}<tr><td>{{ sale.sale_id }}<td>{{ sale.created_at|date:"M j, Y g:i A" }}<td>{{ sale.cashier.user.get_full_name }}<td>{{ sale.payment_method }}<td>{{ business.currency_symbol }}{{ sale.subtotal }}<td>{{ business.currency_symbol }}{{ sale.total_amount }}
{% endfor %}
{% else %}<div class="d-flex align-items-center justify-content-center p-2 rounded-3 bg-grey"><div class=lead>No sales recorded yet</div></div>{% endif %}</table></div></main>{% endblock content %}
{% block customJS %}{% endblock customJS %}